#!/usr/bin/env bash

# ----------------------------------------------------------------------------------
# Combines coverage.json files generated by e2e and units & pushes them to coveralls
# ----------------------------------------------------------------------------------

npx istanbul-combine-updated \
  -d ./coverage \
  -p summary  \
  -r lcovonly \
  ./.cov_ganache.json \
  ./.cov_geth_insta.json \
  ./.cov_geth_auto.json \
  ./coverage/coverage-final.json

cat ./coverage/lcov.info | ./node_modules/.bin/coveralls
